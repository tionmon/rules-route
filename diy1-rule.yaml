# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
proxy-providers:
  ProviderAirPort:
    url: ""
    type: http
    interval: 86400
    health-check: {enable: true,url: "http://www.apple.com/library/test/success.html",interval: 300}
    # override:
    #   additional-prefix: "[ProviderAirPort]"
    
proxies: 
  - name: "ç›´è¿"
    type: direct

mixed-port: 7890
ipv6: false
allow-lan: true
unified-delay: false
tcp-concurrent: true
external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
keep-alive-interval: 1800

geodata-mode: true
geodata-loader: standard
geo-auto-update: false
geo-update-interval: 24
geox-url:
  geoip: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://cdn.jsdelivr.net/gh/soffchen/GeoIP2-CN@release/Country.mmdb"
  asn: "https://mirror.ghproxy.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

find-process-mode: strict
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

tun:
  enable: true
  stack: mixed
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

dns:
  enable: true
  prefer-h3: false # DOH ä¼˜å…ˆä½¿ç”¨ http/3
  use-hosts: true # æ˜¯å¦å›åº”é…ç½®ä¸­çš„ hostsï¼Œé»˜è®¤ true
  use-system-hosts: false # æ˜¯å¦æŸ¥è¯¢ç³»ç»Ÿ hostsï¼Œé»˜è®¤ true
  # listen: 0.0.0.0:53 # DNS æœåŠ¡ç›‘å¬ï¼Œä»…æ”¯æŒ udp
  ipv6: false
  default-nameserver: # é»˜è®¤ DNS, ç”¨äºè§£æ DNS æœåŠ¡å™¨ çš„åŸŸåï¼Œå¿…é¡»ä¸º IP, å¯ä¸ºåŠ å¯† DNS
    - 1.2.4.8
    - tls://223.5.5.5
  enhanced-mode: fake-ip # or reder-host
  fake-ip-range: 172.29.0.1/16 # Fake-IP è§£æåœ°å€æ± 
  fake-ip-filter: # Fake-IP è¿‡æ»¤ï¼Œåˆ—è¡¨ä¸­çš„åŸŸåè¿”å›çœŸå® IP
    - '+.local'
    - '+.lan'
    - '+.in-addr.arpa'
    - 'injections.adguard.org'
    - 'local.adguard.org'
  respect-rules: false
  # é…ç½®æŸ¥è¯¢åŸŸåä½¿ç”¨çš„ DNS æœåŠ¡å™¨
  nameserver-policy:
    "+.lan,+.in-addr.arpa": system
    # å¹¿å‘Šæ‹¦æˆªï¼Œæ•ˆæœæœ‰é™ï¼Œè¯·ä½¿ç”¨æµè§ˆå™¨æ‰©å±•ç­‰æ›´æœ‰æ•ˆçš„æ‰‹æ®µ
    # ç«™é•¿æ³¨æ„ï¼Œä¼šæ‹¦æˆª Google Analytics
    # "geosite:category-ads-all": rcode://success
    "rule-set:direct":
      - tls://223.5.5.5
      - tls://223.6.6.6
      - 'https://223.5.5.5/dns-query#h3=true'
      - 'https://223.6.6.6/dns-query#h3=true'
    "geosite:private,onedrive,microsoft@cn,apple@cn,steam@cn,google@cn,jetbrains@cn,category-games@cn,cn":
      - tls://223.5.5.5
      - tls://223.6.6.6
      - 'https://223.5.5.5/dns-query#h3=true'
      - 'https://223.6.6.6/dns-query#h3=true'
  proxy-server-nameserver:
    - 'https://223.5.5.5/dns-query#h3=true'
    - 'https://223.6.6.6/dns-query#h3=true'
  nameserver:
    # Google
    - 'tls://8.8.8.8#ğŸŒ å›½å¤–è®¿é—®'
    - 'tls://8.8.4.4#ğŸŒ å›½å¤–è®¿é—®'
    - 'https://8.8.8.8/dns-query#ğŸŒ å›½å¤–è®¿é—®&h3=true'
    - 'https://8.8.4.4/dns-query#ğŸŒ å›½å¤–è®¿é—®&h3=true'
    # Cloudflare
    - 'tls://1.1.1.1#ğŸŒ å›½å¤–è®¿é—®'
    - 'tls://1.0.0.1#ğŸŒ å›½å¤–è®¿é—®'
    - 'https://1.1.1.1/dns-query#ğŸŒ å›½å¤–è®¿é—®&h3=true'
    - 'https://1.0.0.1/dns-query#ğŸŒ å›½å¤–è®¿é—®&h3=true'
    # dns.sb
    - 'tls://185.222.222.222#ğŸŒ å›½å¤–è®¿é—®'
    - 'tls://45.11.45.11#ğŸŒ å›½å¤–è®¿é—®'
    - 'https://185.222.222.222/dns-query#ğŸŒ å›½å¤–è®¿é—®'
    - 'https://45.11.45.11/dns-query#ğŸŒ å›½å¤–è®¿é—®'

proxy-groups:

  - name: é»˜è®¤
    type: select
    proxies: [è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,ç›´è¿]

  - name: Google
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: Telegram
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: Twitter
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: YouTube
    type: select
    proxies: [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: Github
    type: select
    proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: OpenAI
    type: select
    proxies:  [é»˜è®¤,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½]

  - name: Microsoft
    type: select
    proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]

  - name: å›½å†…
    type: select
    proxies:  [ç›´è¿,é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©]

  - name: å…¶ä»–
    type: select
    proxies:  [é»˜è®¤,é¦™æ¸¯,å°æ¹¾,æ—¥æœ¬,æ–°åŠ å¡,ç¾å›½,å…¨éƒ¨èŠ‚ç‚¹,è‡ªåŠ¨é€‰æ‹©,ç›´è¿]


  #åˆ†éš”,ä¸‹é¢æ˜¯åœ°åŒºåˆ†ç»„
  - name: é¦™æ¸¯
    type: url-test
    use:
      - ProviderAirPort
    filter: "(?i)æ¸¯|hk|hongkong|hong kong"
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300
    tolerance: 50
    #lazy: true
          
  - name: å°æ¹¾
    type: url-test
    use:
      - ProviderAirPort
    filter: "(?i)å°|tw|taiwan"
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300
    tolerance: 50
    #lazy: true    

  - name: æ—¥æœ¬
    type: url-test
    use:
      - ProviderAirPort
    filter: "(?i)æ—¥æœ¬|jp|japan"
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300
    tolerance: 50
    #lazy: true    

  - name: ç¾å›½
    type: select
    use:
      - ProviderAirPort
    filter: "(?i)ç¾|us|unitedstates|united states"
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300
    tolerance: 50
    #lazy: true    

  - name: æ–°åŠ å¡
    type: url-test
    use:
      - ProviderAirPort
    filter: "(?i)(æ–°|sg|singapore)"
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300
    tolerance: 50
    #lazy: true    

  - name: å…¨éƒ¨èŠ‚ç‚¹
    type: select
    include-all: true

  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    include-all: true
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300
    tolerance: 10

rules:

  # ä¸ªäººè‡ªå®šä¹‰
  - RULE-SET,category-ai-chat-!cn,ğŸ’¬ AI æœåŠ¡
  # æ³¨æ„ï¼šGithubä¹Ÿåœ¨è¿™é‡Œå“¦ï¼
  - RULE-SET,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,steam,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,epicgames,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ea,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ubisoft,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,blizzard,ğŸ® æ¸¸æˆå¹³å°

  # è§„åˆ™é›†
  - RULE-SET,reject,REJECT
  - RULE-SET,proxy,ğŸŒ å›½å¤–è®¿é—®
  - RULE-SET,direct,ğŸ¯ å¤§é™†ç›´è¿

  # å¹¿å‘Šè¿‡æ»¤
  - GEOSITE,category-ads-all,REJECT

  # ç›´è¿ï¼Œ@cn ä¸ºè¯¥è§„åˆ™å†…çš„åŸŸååœ¨ä¸­å›½å¤§é™†æœ‰æ¥å…¥ç‚¹
  - GEOSITE,private,ğŸ¯ å¤§é™†ç›´è¿
  - GEOSITE,onedrive,ğŸ¯ å¤§é™†ç›´è¿
  - GEOSITE,microsoft@cn,ğŸ¯ å¤§é™†ç›´è¿
  - GEOSITE,apple@cn,ğŸ¯ å¤§é™†ç›´è¿
  - GEOSITE,steam@cn,ğŸ¯ å¤§é™†ç›´è¿
  - GEOSITE,google@cn,ğŸ¯ å¤§é™†ç›´è¿
  - GEOSITE,jetbrains@cn,ğŸ¯ å¤§é™†ç›´è¿
  - GEOSITE,category-games@cn,ğŸ¯ å¤§é™†ç›´è¿
  # æµåª’ä½“
  - GEOSITE,biliintl,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,youtube,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,netflix,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,disney,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,amazon,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,disneyplus,ğŸŒ å›½å¤–è®¿é—®
  # å¼ºåˆ¶ä»£ç†
  - GEOSITE,google,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,twitter,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,pixiv,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,category-scholar-!cn,ğŸŒ å›½å¤–è®¿é—®
  - GEOSITE,geolocation-!cn,ğŸŒ å›½å¤–è®¿é—®

  # å…œåº•å¼ºåˆ¶ç›´è¿
  - GEOSITE,cn,ğŸ¯ å¤§é™†ç›´è¿

  # GEOIP è§„åˆ™
  - GEOIP,private,ğŸ¯ å¤§é™†ç›´è¿
  - GEOIP,telegram,ğŸŒ å›½å¤–è®¿é—®
  - GEOIP,JP,ğŸŒ å›½å¤–è®¿é—®
  - GEOIP,CN,ğŸ¯ å¤§é™†ç›´è¿

  # LAN
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,17.0.0.0/8,DIRECT       # ç»„ç½‘åœ°å€
  - IP-CIDR,100.64.0.0/10,DIRECT    # NAT åœ°å€
  - IP-CIDR,224.0.0.0/4,DIRECT      # ç»„æ’­åœ°å€
  - IP-CIDR6,fe80::/10,DIRECT       # IPv6 æœ¬åœ°é“¾è·¯åœ°å€

  # æ¼ç½‘ä¹‹é±¼
  - MATCH,ğŸŒ å›½å¤–è®¿é—®

rule-providers:
  direct:
    behavior: classical
    type: inline
    payload:
      # CDN
      - 'DOMAIN,download-cdn.jetbrains.com'
      # Clash Dashboard & Converter
      - 'DOMAIN,clash.razord.top'
      - 'DOMAIN,yacd.haishan.me'
      - 'DOMAIN,nexconvert.com'
      # DDNS
      - 'DOMAIN-SUFFIX,ip.sb'
      # time
      - 'DOMAIN,time.android.com'
  proxy:
    behavior: classical
    type: inline
    payload:
      # ç›´è¿ä½“éªŒä¸ä½³ï¼Œå¼ºåˆ¶ä»£ç†
      - 'DOMAIN,dockerstatic.com'
      - 'DOMAIN,fonts.googleapis.com'
      - 'DOMAIN,fonts.gstatic.com'
      - 'DOMAIN,www.gstatic.com'
  reject:
    behavior: classical
    type: inline
    payload:
      # niconico å¹¿å‘Š
      - 'DOMAIN-SUFFIX,ads.nicovideo.jp'
      # mumu æ¨¡æ‹Ÿå™¨å¹¿å‘Š
      - 'DOMAIN-SUFFIX,mumu.nie.netease.com'
      # postman æ›´æ–°
      - 'DOMAIN-SUFFIX,dl.pstmn.io'
      - 'DOMAIN-SUFFIX,sync-v3.getpostman.com'
      - 'DOMAIN-SUFFIX,getpostman.com'

  # AI æœåŠ¡
  category-ai-chat-!cn:
    type: http
    format: yaml # å¯ä¸å¡«ï¼Œé»˜è®¤ä¸º yaml
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-!cn.yaml
    path: ./ruleset/category-ai-!cn.yaml
    interval: 86400

  # å¾®è½¯æœåŠ¡
  microsoft:
    type: http
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.yaml
    path: ./ruleset/microsoft.yaml
    interval: 86400

  # æ¸¸æˆå¹³å°
  steam:
    type: http
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.yaml
    path: ./ruleset/steam.yaml
    interval: 86400
  epicgames:
    type: http
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/epicgames.yaml
    path: ./ruleset/epicgames.yaml
    interval: 86400
  ea:
    type: http
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ea.yaml
    path: ./ruleset/ea.yaml
    interval: 86400
  ubisoft:
    type: http
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ubisoft.yaml
    path: ./ruleset/ubisoft.yaml
    interval: 86400
  blizzard:
    type: http
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/blizzard.yaml
    path: ./ruleset/blizzard.yaml
    interval: 86400